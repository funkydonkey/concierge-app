# üéì –ó–∞–¥–∞–Ω–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ —Å LLM

–≠—Ç–∏ –∑–∞–¥–∞–Ω–∏—è –ø–æ–º–æ–≥—É—Ç —Ç–µ–±–µ –Ω–∞—É—á–∏—Ç—å—Å—è —É–ø—Ä–∞–≤–ª—è—Ç—å LLM –º–æ–¥–µ–ª—è–º–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ø—Ä–æ–µ–∫—Ç–∞ Voice Notes Service.

## üìö –ß—Ç–æ —Ç—ã –∏–∑—É—á–∏—à—å

1. **OpenAI Whisper API** - —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –∞—É–¥–∏–æ
2. **OpenAI Agents SDK** - —Å–æ–∑–¥–∞–Ω–∏–µ AI –∞–≥–µ–Ω—Ç–æ–≤ —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
3. **Prompt Engineering** - –Ω–∞–ø–∏—Å–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤
4. **Function Calling** - —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ tools –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤
5. **GitHub API** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ —á–µ—Ä–µ–∑ LLM

---

## üéØ –ó–∞–¥–∞–Ω–∏–µ 1: Whisper Transcriber (–õ—ë–≥–∫–æ–µ)

**–§–∞–π–ª**: `app/services/transcriber.py`

**–¶–µ–ª—å**: –ù–∞—É—á–∏—Ç—å—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å OpenAI Whisper API –¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ –∞—É–¥–∏–æ.

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

1. –°–æ–∑–¥–∞–π –∫–ª–∞—Å—Å `WhisperTranscriber` —Å –º–µ—Ç–æ–¥–æ–º `transcribe()`
2. –ò—Å–ø–æ–ª—å–∑—É–π `openai.audio.transcriptions.create()` –¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
3. –ü–æ–¥–¥–µ—Ä–∂–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç–æ–≤: m4a, mp3, wav, webm
4. –î–æ–±–∞–≤—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

### –ü–æ–¥—Å–∫–∞–∑–∫–∏:

```python
from openai import AsyncOpenAI
from pathlib import Path

class WhisperTranscriber:
    def __init__(self, api_key: str):
        self.client = AsyncOpenAI(api_key=api_key)

    async def transcribe(self, audio_file_path: str) -> str:
        """
        –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä—É–µ—Ç –∞—É–¥–∏–æ —Ñ–∞–π–ª –≤ —Ç–µ–∫—Å—Ç.

        Args:
            audio_file_path: –ü—É—Ç—å –∫ –∞—É–¥–∏–æ —Ñ–∞–π–ª—É

        Returns:
            str: –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è —Ç–µ–∫—Å—Ç–∞

        Raises:
            Exception: –ï—Å–ª–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å
        """
        # TODO: –¢–≤–æ–π –∫–æ–¥ –∑–¥–µ—Å—å
        # 1. –û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª (–∏—Å–ø–æ–ª—å–∑—É–π 'rb' —Ä–µ–∂–∏–º)
        # 2. –í—ã–∑–æ–≤–∏ API: self.client.audio.transcriptions.create()
        # 3. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: model="whisper-1", file=audio_file, language="ru"
        # 4. –í–µ—Ä–Ω–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç transcription.text
        pass
```

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:
- [OpenAI Whisper API Docs](https://platform.openai.com/docs/guides/speech-to-text)

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:
- [ ] –ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç—ã m4a, mp3, wav
- [ ] –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- [ ] –ï—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (try/except)

---

## üéØ –ó–∞–¥–∞–Ω–∏–µ 2: GitHub Vault Service (–°—Ä–µ–¥–Ω–µ–µ)

**–§–∞–π–ª**: `app/services/github_vault.py`

**–¶–µ–ª—å**: –ù–∞—É—á–∏—Ç—å—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å REST API (GitHub) –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Obsidian vault.

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

1. –°–æ–∑–¥–∞–π –∫–ª–∞—Å—Å `GitHubVaultService` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏ –≤ GitHub
2. –†–µ–∞–ª–∏–∑—É–π –º–µ—Ç–æ–¥—ã:
   - `get_file()` - –ø–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª
   - `create_file()` - —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª
   - `update_file()` - –æ–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª
   - `list_folder()` - —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –≤ –ø–∞–ø–∫–µ

### –ü–æ–¥—Å–∫–∞–∑–∫–∏:

```python
import httpx
import base64
from dataclasses import dataclass

@dataclass
class FileInfo:
    """–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏."""
    path: str
    sha: str
    content: str | None = None

class GitHubVaultService:
    def __init__(self, token: str, repo_owner: str, repo_name: str, branch: str = "main"):
        self.token = token
        self.repo_owner = repo_owner
        self.repo_name = repo_name
        self.branch = branch
        self.base_url = f"https://api.github.com/repos/{repo_owner}/{repo_name}"
        self.headers = {
            "Authorization": f"Bearer {token}",
            "Accept": "application/vnd.github.v3+json"
        }

    async def get_file(self, path: str) -> FileInfo | None:
        """
        –ü–æ–ª—É—á–∞–µ—Ç —Ñ–∞–π–ª –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

        TODO: –¢–≤–æ–π –∫–æ–¥ –∑–¥–µ—Å—å
        1. –°–¥–µ–ª–∞–π GET –∑–∞–ø—Ä–æ—Å: {base_url}/contents/{path}?ref={branch}
        2. –ò—Å–ø–æ–ª—å–∑—É–π httpx.AsyncClient() –¥–ª—è async –∑–∞–ø—Ä–æ—Å–æ–≤
        3. –î–µ–∫–æ–¥–∏—Ä—É–π content –∏–∑ base64: base64.b64decode(content).decode('utf-8')
        4. –í–µ—Ä–Ω–∏ FileInfo –∏–ª–∏ None –µ—Å–ª–∏ 404
        """
        pass

    async def create_file(self, path: str, content: str, commit_message: str) -> FileInfo:
        """
        –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π —Ñ–∞–π–ª –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

        TODO: –¢–≤–æ–π –∫–æ–¥ –∑–¥–µ—Å—å
        1. –ó–∞–∫–æ–¥–∏—Ä—É–π content –≤ base64: base64.b64encode(content.encode()).decode()
        2. –°–¥–µ–ª–∞–π PUT –∑–∞–ø—Ä–æ—Å: {base_url}/contents/{path}
        3. Body: {"message": commit_message, "content": encoded_content, "branch": branch}
        4. –í–µ—Ä–Ω–∏ FileInfo —Å SHA –∏–∑ –æ—Ç–≤–µ—Ç–∞
        """
        pass

    async def update_file(self, path: str, content: str, sha: str, commit_message: str) -> FileInfo:
        """
        –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª (—Ç—Ä–µ–±—É–µ—Ç—Å—è SHA –¥–ª—è –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏).

        TODO: –¢–≤–æ–π –∫–æ–¥ –∑–¥–µ—Å—å
        –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ create_file, –Ω–æ –¥–æ–±–∞–≤—å "sha": sha –≤ body
        """
        pass
```

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:
- [GitHub REST API - Contents](https://docs.github.com/en/rest/repos/contents)

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:
- [ ] –ú–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ (async/await)
- [ ] –§–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ GitHub
- [ ] –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ base64 –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (404, 409 –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã)

---

## üéØ –ó–∞–¥–∞–Ω–∏–µ 3: AI Agent System Prompt (–°—Ä–µ–¥–Ω–µ–µ)

**–§–∞–π–ª**: `app/services/agent.py`

**–¶–µ–ª—å**: –ù–∞—É—á–∏—Ç—å—Å—è –ø–∏—Å–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ system prompts –¥–ª—è AI –∞–≥–µ–Ω—Ç–æ–≤.

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

1. –ù–∞–ø–∏—à–∏ system prompt –¥–ª—è –∞–≥–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
2. –ê–≥–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —É–º–µ—Ç—å –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å:
   - –ó–∞–¥–∞—á–∏ (TODO)
   - –ò–¥–µ–∏
   - –†–∞–±–æ—á–∏–µ –∑–∞–º–µ—Ç–∫–∏
   - –õ–∏—á–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏
3. –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–∏–º–µ—Ä—ã (few-shot learning)
4. –£–∫–∞–∂–∏ –ø—Ä–∞–≤–∏–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–º–µ—à–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### –ü–æ–¥—Å–∫–∞–∑–∫–∏:

```python
AGENT_SYSTEM_PROMPT = """
–¢—ã ‚Äî –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∑–∞–º–µ—Ç–æ–∫.

–¢–í–û–ò –ó–ê–î–ê–ß–ò:
1. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é –≥–æ–ª–æ—Å–æ–≤–æ–π –∑–∞–º–µ—Ç–∫–∏
2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
3. –í—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏—è —á–µ—Ä–µ–∑ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

–¢–ò–ü–´ –ö–û–ù–¢–ï–ù–¢–ê:

# TODO: –î–æ–ø–æ–ª–Ω–∏ —ç—Ç–æ—Ç –ø—Ä–æ–º–ø—Ç
# 1. –û–ø–∏—à–∏ –∫–∞–∂–¥—ã–π —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–∑–∞–¥–∞—á–∏, –∏–¥–µ–∏, —Ä–∞–±–æ—Ç–∞, –ª–∏—á–Ω–æ–µ)
# 2. –£–∫–∞–∂–∏ —Ç—Ä–∏–≥–≥–µ—Ä–Ω—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞
# 3. –û–ø–∏—à–∏ –∫–∞–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –≤—ã–ø–æ–ª–Ω—è—Ç—å (create_note, add_todo_task)
# 4. –î–æ–±–∞–≤—å –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Å–º–µ—à–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
# 5. –£–∫–∞–∂–∏ –∫–∞–∫ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–º–µ—Ç–∫–∏ (Markdown)

–ü–†–ò–ú–ï–†–´:

–ü—Ä–∏–º–µ—Ä 1 - –ó–∞–¥–∞—á–∞:
–í—Ö–æ–¥: "–ù—É–∂–Ω–æ –∫—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ –∏ —Ö–ª–µ–±"
–î–µ–π—Å—Ç–≤–∏–µ: add_todo_task(task="–ö—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ –∏ —Ö–ª–µ–±", priority="medium")

# TODO: –î–æ–±–∞–≤—å –µ—â—ë 3-4 –ø—Ä–∏–º–µ—Ä–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

–ü–†–ê–í–ò–õ–ê:
- –£–±–∏—Ä–∞–π —Å–ª–æ–≤–∞-–ø–∞—Ä–∞–∑–∏—Ç—ã ("—ç—ç—ç", "–Ω—É", "—Ç–∏–ø–∞")
- –§–æ—Ä–º–∞—Ç–∏—Ä—É–π –≤ Markdown
- –ó–∞–¥–∞—á–∏ –Ω–∞—á–∏–Ω–∞–π —Å –≥–ª–∞–≥–æ–ª–∞
- –ï—Å–ª–∏ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ ‚Äî —Å–æ–∑–¥–∞–≤–∞–π –∑–∞–º–µ—Ç–∫—É –≤ Personal
- –í—Å–µ–≥–¥–∞ –æ—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
"""
```

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:
- [ ] –ü—Ä–æ–º–ø—Ç —á—ë—Ç–∫–∏–π –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
- [ ] –ï—Å—Ç—å –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- [ ] –£–∫–∞–∑–∞–Ω—ã —Ç—Ä–∏–≥–≥–µ—Ä–Ω—ã–µ —Å–ª–æ–≤–∞
- [ ] –û–ø–∏—Å–∞–Ω–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è —Å–º–µ—à–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- [ ] –ï—Å—Ç—å –ø—Ä–∞–≤–∏–ª–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üéØ –ó–∞–¥–∞–Ω–∏–µ 4: AI Agent Tools (–°–ª–æ–∂–Ω–æ–µ)

**–§–∞–π–ª—ã**: `app/tools/note_tools.py`, `app/tools/todo_tools.py`

**–¶–µ–ª—å**: –ù–∞—É—á–∏—Ç—å—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å function tools –¥–ª—è OpenAI Agents SDK.

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

1. –°–æ–∑–¥–∞–π tool `create_note` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–º–µ—Ç–æ–∫
2. –°–æ–∑–¥–∞–π tool `add_todo_task` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á
3. –ò—Å–ø–æ–ª—å–∑—É–π type hints –∏ docstrings –¥–ª—è –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ö–µ–º
4. –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π —Å `GitHubVaultService`

### –ü–æ–¥—Å–∫–∞–∑–∫–∏:

```python
# app/tools/note_tools.py

from datetime import datetime
from typing import Annotated
from app.services.github_vault import GitHubVaultService

# TODO: –ò–∑—É—á–∏ –∫–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å function tools –¥–ª—è OpenAI Agents SDK
# –ü–æ–¥—Å–∫–∞–∑–∫–∞: –∏—Å–ø–æ–ª—å–∑—É–π –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä @function_tool –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ async —Ñ—É–Ω–∫—Ü–∏–∏

async def create_note(
    title: Annotated[str, "–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–º–µ—Ç–∫–∏ (–±–µ–∑ .md)"],
    content: Annotated[str, "–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞–º–µ—Ç–∫–∏ –≤ Markdown"],
    folder: Annotated[str, "–ü–∞–ø–∫–∞: Ideas, Work, Personal, Voice Notes"] = "Voice Notes",
    vault: GitHubVaultService = None  # Dependency injection
) -> str:
    """
    –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é –∑–∞–º–µ—Ç–∫—É –≤ Obsidian vault —á–µ—Ä–µ–∑ GitHub.

    TODO: –¢–≤–æ–π –∫–æ–¥ –∑–¥–µ—Å—å
    1. –°–æ–∑–¥–∞–π –ø—É—Ç—å: {folder}/{date}-{title}.md
    2. –°–æ–∑–¥–∞–π frontmatter —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ (created, source, tags)
    3. –û–±—ä–µ–¥–∏–Ω–∏ frontmatter + content
    4. –í—ã–∑–æ–≤–∏ vault.create_file()
    5. –í–µ—Ä–Ω–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
    """
    # –ü—Ä–∏–º–µ—Ä frontmatter:
    # ---
    # created: 2025-01-17T14:30:00
    # source: voice
    # tags: [voice-note]
    # ---

    pass

# TODO: –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Å–æ–∑–¥–∞–π —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è append_to_note –∏ list_notes
```

```python
# app/tools/todo_tools.py

async def add_todo_task(
    task: Annotated[str, "–¢–µ–∫—Å—Ç –∑–∞–¥–∞—á–∏ (–Ω–∞—á–∏–Ω–∞–π —Å –≥–ª–∞–≥–æ–ª–∞)"],
    priority: Annotated[str, "high, medium, low"] = "medium",
    due_date: Annotated[str | None, "YYYY-MM-DD –∏–ª–∏ None"] = None,
    vault: GitHubVaultService = None
) -> str:
    """
    –î–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–¥–∞—á—É –≤ TODO.md.

    TODO: –¢–≤–æ–π –∫–æ–¥ –∑–¥–µ—Å—å
    1. –ü–æ–ª—É—á–∏ —Ç–µ–∫—É—â–∏–π TODO.md —á–µ—Ä–µ–∑ vault.get_file("TODO.md")
    2. –†–∞—Å–ø–∞—Ä—Å–∏ —Ñ–∞–π–ª –Ω–∞ —Å–µ–∫—Ü–∏–∏ (## High Priority, ## Medium Priority, etc.)
    3. –î–æ–±–∞–≤—å –∑–∞–¥–∞—á—É –≤ –Ω—É–∂–Ω—É—é —Å–µ–∫—Ü–∏—é: "- [ ] {task}"
    4. –ï—Å–ª–∏ –µ—Å—Ç—å due_date, –¥–æ–±–∞–≤—å –≤ –∫–æ–Ω—Ü–µ –∑–∞–¥–∞—á–∏
    5. –û–±–Ω–æ–≤–ª—è–π —Ñ–∞–π–ª —á–µ—Ä–µ–∑ vault.update_file()
    6. –í–µ—Ä–Ω–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
    """
    pass
```

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:
- [OpenAI Function Calling](https://platform.openai.com/docs/guides/function-calling)
- –ò–∑—É—á–∏ –∫–∞–∫ OpenAI Agents SDK —Ä–∞–±–æ—Ç–∞–µ—Ç —Å tools

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:
- [ ] Tools –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø–∏—Å–∞–Ω—ã (type hints + docstrings)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GitHubVaultService —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ó–∞–º–µ—Ç–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º frontmatter
- [ ] TODO.md –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ –Ω—É–∂–Ω–æ–π —Å–µ–∫—Ü–∏–∏
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (—Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω, –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã)

---

## üéØ –ó–∞–¥–∞–Ω–∏–µ 5: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è AI Agent (–°–ª–æ–∂–Ω–æ–µ)

**–§–∞–π–ª**: `app/services/agent.py`

**–¶–µ–ª—å**: –°–æ–±—Ä–∞—Ç—å –≤—Å—ë –≤–º–µ—Å—Ç–µ –∏ —Å–æ–∑–¥–∞—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ AI –∞–≥–µ–Ω—Ç–∞.

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

1. –ù–∞—Å—Ç—Ä–æ–π OpenAI Agents SDK
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π –≤—Å–µ tools
3. –°–æ–∑–¥–∞–π —Ñ—É–Ω–∫—Ü–∏—é `process_transcription()` –∫–æ—Ç–æ—Ä–∞—è:
   - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–µ–∫—Å—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç –∞–≥–µ–Ω—Ç–∞
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–µ–π—Å—Ç–≤–∏–π

### –ü–æ–¥—Å–∫–∞–∑–∫–∏:

```python
from openai import AsyncOpenAI
from app.tools.note_tools import create_note, append_to_note, list_notes
from app.tools.todo_tools import add_todo_task

class VoiceNotesAgent:
    def __init__(self, api_key: str, vault_service):
        self.client = AsyncOpenAI(api_key=api_key)
        self.vault = vault_service

        # TODO: –ò–∑—É—á–∏ OpenAI Agents SDK
        # –í–æ–∑–º–æ–∂–Ω–æ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –ø–æ–¥—Ö–æ–¥
        # (–Ω–∞ –º–æ–º–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏—è SDK –µ—â—ë –≤ beta)

    async def process_transcription(self, transcription: str) -> dict:
        """
        –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é —á–µ—Ä–µ–∑ AI –∞–≥–µ–Ω—Ç–∞.

        TODO: –¢–≤–æ–π –∫–æ–¥ –∑–¥–µ—Å—å
        1. –°–æ–∑–¥–∞–π —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–µ–π
        2. –í—ã–∑–æ–≤–∏ –∞–≥–µ–Ω—Ç–∞ —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ tools
        3. –û–±—Ä–∞–±–æ—Ç–∞–π tool calls (–µ—Å–ª–∏ –µ—Å—Ç—å)
        4. –°–æ–±–µ—Ä–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Å–ª–æ–≤–∞—Ä—å:
           {
               "actions": [...],
               "summary": "..."
           }
        """
        pass
```

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:
- [ ] –ê–≥–µ–Ω—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
- [ ] Tools –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [ ] –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–µ–π—Å—Ç–≤–∏–π –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è
- [ ] –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–∑–∞–¥–∞—á–∏, –∏–¥–µ–∏, –∑–∞–º–µ—Ç–∫–∏)

---

## üìù –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. **–ù–∞—á–Ω–∏ —Å –ó–∞–¥–∞–Ω–∏—è 1** (Whisper) - —ç—Ç–æ —Å–∞–º–æ–µ –ø—Ä–æ—Å—Ç–æ–µ
2. **–ü–µ—Ä–µ–π–¥–∏ –∫ –ó–∞–¥–∞–Ω–∏—é 2** (GitHub) - –Ω–∞—É—á–∏—à—å—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å REST API
3. **–ó–∞–¥–∞–Ω–∏–µ 3** (System Prompt) - prompt engineering
4. **–ó–∞–¥–∞–Ω–∏–µ 4** (Tools) - —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –∞–≥–µ–Ω—Ç–∞
5. **–ó–∞–¥–∞–Ω–∏–µ 5** (Integration) - —Å–æ–±—Ä–∞—Ç—å –≤—Å—ë –≤–º–µ—Å—Ç–µ

## üÜò –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

–ï—Å–ª–∏ –∑–∞—Å—Ç—Ä—è–ª:
1. –ü–æ—á–∏—Ç–∞–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ —Å—Å—ã–ª–∫–∞–º –≤ –∑–∞–¥–∞–Ω–∏—è—Ö
2. –ü–æ—Å–º–æ—Ç—Ä–∏ –ø—Ä–∏–º–µ—Ä—ã –≤ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö (der-bot, excel_agent, faq_bot)
3. –ü–æ–ø—Ä–æ—Å–∏ –º–µ–Ω—è –æ –ø–æ–¥—Å–∫–∞–∑–∫–µ, –Ω–æ –ø–æ–ø—Ä–æ–±—É–π —Å–Ω–∞—á–∞–ª–∞ —Å–∞–º!

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è:
1. –ó–∞–ø—É—Å—Ç–∏ –∫–æ–¥ –ª–æ–∫–∞–ª—å–Ω–æ
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
3. –£–±–µ–¥–∏—Å—å —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫
4. –û—Ç–º–µ—Ç—å –∫—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

–£–¥–∞—á–∏! üöÄ
